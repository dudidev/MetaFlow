<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../style/style.css">
    <link rel="icon" href="../assets/images/LOGOTIPO-removebg-preview.png" type="image/x-icon">
    <title>Your Goal!</title>
</head>
<body>
    <header class="encabezadoCreate">
        <a href="./vistaCreate.html">
            <div class="logo">
                <img src="../assets/images/LOGOTIPO.jpg" alt="Logo de MetaFlow">
                <h1>MetaFlow</h1>
            </div>
        </a>
        <nav class="nav-bar">
            <button id="toggle-theme">☀️/🌙</button>
            <ul>
                <li><a href="../index.html">Home</a></li>
  
                <li><a href="../templates/vistaCreate.html">Mis metas</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="section-bg">
            <div class="goal-form" id="goal-form">
                <h2>¿Qué meta quieres cumplir hoy?</h2>
                <input type="text" id="inputTask" class="userGoal" placeholder="Ingresa tu meta! Ej: 'Quiero correr 2 km hoy'">
                <button onclick="sendToIa()">¡Recomiéndame!</button>
                <div class="loader" id="loader"></div>
                <div class="responseContainer" id="responseContainer">
                    <h3>Una pequeña recomendación ;)</h3>
                    <div id="ia-answer"></div>
                    <div class="ia-btns">
                        <button class="reload-btn">Actualizar respuesta</button>
                        <button class="add-btn">¡Añadir meta!</button>
                </div>
                </div>
            </div>
        </div>
    </main>
    <footer></footer>
    <script src="../scripts/theme.js"></script>
    <script src="../scripts/goal.js"></script>
</body>

<script>
  const metaInput = document.querySelector('.userGoal');
  const addBtn = document.querySelector('.add-btn');

  function showMessage(msg, isError = false) {
      const mensaje = document.createElement('p');
      mensaje.textContent = msg;
      mensaje.style.color = isError ? 'red' : 'green';
      document.body.appendChild(mensaje);

      setTimeout(() => {
          mensaje.remove();
      }, 3000);
  }

  function saveMeta() {
      const meta = metaInput.value.trim();

      if (meta === '') {
          showMessage('Por favor, ingresa una meta', true);
          return;
      }

      // Obtener metas anteriores o crear una nueva lista
      let metas = JSON.parse(localStorage.getItem('metas')) || [];
      metas.push(meta);

      // Guardar metas nuevamente
      localStorage.setItem('metas', JSON.stringify(metas));
      showMessage('¡Meta guardada con éxito!');

      // Limpiar input
      metaInput.value = '';
  }

  addBtn.addEventListener('click', saveMeta);
</script>

</html>